/*! For license information please see document-pip.bundle.js.LICENSE.txt */
(()=>{"use strict";var e={8500:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(3645),n=r.n(a)()((function(e){return e[1]}));n.push([e.id,"body{background:black;margin:0;overflow:hidden}video{width:100% !important;height:100% !important}video{filter:none}video:hover ~ .twfyt-sticky-player__progress-bar__container{bottom:0;opacity:1}video:hover ~ .twfyt-sticky-player__progress-bar__container .twfyt-sticky-player__progress-bar{padding:12px;transition:all 200ms cubic-bezier(0.4, 0, 0.2, 1)}.ytp-chrome-top-buttons,.ytp-chrome-bottom,.ytp-gradient-bottom,.ytp-ad-overlay-slot,.ytp-ce-element,.ytp-ce-shadow,.ytp-iv-player-content,#cinematics,.html5-endscreen,.ytp-paid-content-overlay,.ytp-heat-map-container,.ytp-suggested-action,.ytp-gradient-top,.ytp-chrome-top,.ytp-iv-video-content{display:none}.twfyt-sticky-player__progress-bar__container{pointer-events:all !important}.twfyt-sticky-player__progress-bar__container{background-image:linear-gradient(0deg, rgba(0,0,0,0.5) 0, rgba(0,0,0,0.25) 40%, rgba(0,0,0,0) 100%);opacity:0;transition:all 200ms cubic-bezier(0.4, 0, 0.2, 1)}.twfyt-sticky-player__progress-bar__container:hover{bottom:0;opacity:1}.twfyt-sticky-player__progress-bar__container:hover .twfyt-sticky-player__progress-bar{padding:12px}.twfyt-sticky-player__progress-bar__container .twfyt-sticky-player__progress-bar__slider::after{left:12px;right:12px}ytmusic-player-page .content.ytmusic-player-page{overflow:auto;padding-top:0}ytmusic-player-page ytmusic-player{width:100%;height:100%}ytmusic-player-page #song-image img{-o-object-fit:contain;object-fit:contain;background:var(--ytmusic-player-page-background)}ytmusic-player-page .song-media-controls.ytmusic-player .top-row-buttons,ytmusic-player-page .ytp-gradient-top{display:none}ytmusic-player-page .side-panel{min-height:100% !important}ytmusic-player-page #twfyt-sticky-player-progress-bar{display:none}\n",""]);const o=n},4729:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(3645),n=r.n(a)()((function(e){return e[1]}));n.push([e.id,".twfyt-sticky-player__progress-bar__slider-time{background:rgba(0,0,0,0.8);border-radius:0.25em;bottom:calc(var(--progress-bar-padding) + 24px);color:#eee;font:500 12.98px / 15px 'YouTube Noto', Roboto, Arial, Helvetica, sans-serif;opacity:0;padding:2px 4px;pointer-events:none;position:absolute}.twfyt-sticky-player__progress-bar__slider{-webkit-appearance:none;background:linear-gradient(90deg, var(--progress-bar-color-played) var(--progress-bar-progress), var(--progress-bar-color-buffered) var(--progress-bar-progress), var(--progress-bar-color-buffered) var(--progress-bar-buffer), var(--progress-bar-color-rest) 0%);border-radius:0px;box-shadow:0px 0px 8px 2px rgba(0,0,0,0.08),0px 0px 1px 1px rgba(0,0,0,0.25);box-sizing:border-box;cursor:pointer;width:100%;height:3px;margin:0;outline:none;transition:all 200ms cubic-bezier(0.4, 0, 0.2, 1)}.twfyt-sticky-player__progress-bar__slider::after{content:'';background:linear-gradient(90deg, var(--progress-bar-color-played) var(--progress-bar-progress), var(--progress-bar-color-hover) var(--progress-bar-progress) var(--progress-bar-hover), transparent var(--progress-bar-hover) 100%);position:absolute;left:0;right:0;height:5px;opacity:0;transition:all 200ms cubic-bezier(0.4, 0, 0.2, 1)}.twfyt-sticky-player__progress-bar__slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;cursor:pointer;display:none;width:0px;height:calc(var(--progress-bar-padding) * 2.5)}.twfyt-sticky-player__progress-bar__slider::-moz-range-thumb{cursor:pointer;width:0px;height:0px;opacity:0}.twfyt-sticky-player__progress-bar__container{position:absolute;bottom:-8px;width:100%;z-index:calc(var(--ytd-z-index-masthead) + 2)}.twfyt-sticky-player__progress-bar{--progress-bar-progress: 0%;--progress-bar-buffer: 0%;--progress-bar-hover: 0%;--progress-bar-color-played: #f00;--progress-bar-color-buffered: rgba(255, 255, 255, 0.4);--progress-bar-color-rest: rgba(255, 255, 255, 0.2);--progress-bar-color-hover: rgba(255, 255, 255, 0.4);--progress-bar-opacity: 1;--progress-bar-padding: 8px;font-size:16px;padding:var(--progress-bar-padding) 0;display:flex;justify-content:center;align-items:flex-end;opacity:0.5;opacity:var(--progress-bar-opacity, 0.5);transition:all 200ms cubic-bezier(0.4, 0, 0.2, 1)}.twfyt-sticky-player__progress-bar:hover{opacity:1}.twfyt-sticky-player__progress-bar:hover .twfyt-sticky-player__progress-bar__slider{height:5px}.twfyt-sticky-player__progress-bar:hover .twfyt-sticky-player__progress-bar__slider::after{opacity:1}.twfyt-sticky-player__progress-bar:hover .twfyt-sticky-player__progress-bar__slider::-webkit-slider-thumb{display:block}\n",""]);const o=n},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=e(t);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,a){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(a)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(n[i]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);a&&n[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},3379:(e,t,r)=>{var a,n=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),o=[];function i(e){for(var t=-1,r=0;r<o.length;r++)if(o[r].identifier===e){t=r;break}return t}function s(e,t){for(var r={},a=[],n=0;n<e.length;n++){var s=e[n],c=t.base?s[0]+t.base:s[0],p=r[c]||0,l="".concat(c," ").concat(p);r[c]=p+1;var u=i(l),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(o[u].references++,o[u].updater(d)):o.push({identifier:l,updater:m(d,t),references:1}),a.push(l)}return a}function c(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var o=r.nc;o&&(a.nonce=o)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var i=n(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var p,l=(p=[],function(e,t){return p[e]=t,p.filter(Boolean).join("\n")});function u(e,t,r,a){var n=r?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=l(t,n);else{var o=document.createTextNode(n),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function d(e,t,r){var a=r.css,n=r.media,o=r.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var y=null,f=0;function m(e,t){var r,a,n;if(t.singleton){var o=f++;r=y||(y=c(t)),a=u.bind(null,r,o,!1),n=u.bind(null,r,o,!0)}else r=c(t),a=d.bind(null,r,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var r=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<r.length;a++){var n=i(r[a]);o[n].references--}for(var c=s(e,t),p=0;p<r.length;p++){var l=i(r[p]);0===o[l].references&&(o[l].updater(),o.splice(l,1))}r=c}}}}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={id:a,exports:{}};return e[a](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nc=void 0,(()=>{function e(){return"music.youtube.com"===window.location.hostname}var t=function(){return t=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},t.apply(this,arguments)};function a(e){return"--"+e.replace(/^-+/,"")}var n={get:function(e,r){void 0===r&&(r={});var n=t({element:document.documentElement,parse:!1},r);if(!n.element)return"";var o=n.element.style.getPropertyValue(a(e))||getComputedStyle(n.element).getPropertyValue(a(e));if(!0===n.parse||"float"===n.parse){var i=parseFloat(o);return Number.isNaN(i)?o:i}return"int"===n.parse?(i=parseInt(o),Number.isNaN(i)?o:i):o},set:function(e,r){void 0===r&&(r={});var n=t({element:document.documentElement},r);if(Array.isArray(e))return e.forEach((function(e){var t,r=e[0],o=e[1];null===(t=n.element)||void 0===t||t.style.setProperty(a(r),null===o?null:String(o))}));Object.entries(e).forEach((function(e){var t,r=e[0],o=e[1];null===(t=n.element)||void 0===t||t.style.setProperty(a(r),null===o?null:String(o))}))}};function o(e,t={}){const r={name:document.title,quality:.9,timestamp:` ${Date.now()}`,type:"image/jpeg",ext:"jpg",copyToClipboard:!1,onCapture:void 0,...t},a=`${r.name&&r.name+r.timestamp||Date.now()}.${r.ext}`,n=document.createElement("canvas");n.width=e.videoWidth,n.height=e.videoHeight;const o=n.getContext("2d");o.drawImage(e,0,0,n.width,n.height),r.onCapture&&r.onCapture({canvas:n,ctx:o,video:e}),n.toBlob((e=>{if(r.copyToClipboard)return navigator.clipboard.write([new ClipboardItem({"image/png":e})]);const t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=a,t.click()}),r.copyToClipboard?"image/png":r.type,r.quality)}function i(e){const{buffered:t,currentTime:r,buffered:{length:a}}=e,n=[];for(let e=0;e<a;e++)n.push({start:t.start(e),end:t.end(e)});return{current:n.find((e=>e.start<=r&&e.end>=r)),ranges:n}}function s(e,t){const r=parseFloat(e);return"%"===("string"==typeof e?e.match(/\D+$/)[0]:"s")?r/100*t:r}const c={pause({video:e,paused:t,state:r}){t&&(r.restorePausedActivated=!0,!r.playbackRate&&(r.playbackRate=e.playbackRate),e.playbackRate=0)},play({state:e,video:t}){t.playbackRate=e.playbackRate,e.restorePausedActivated=!1,e.playbackRate=null,t.play()}};function p(e,t){n.set({"progress-bar-progress":100*e+"%"},{element:t})}const l={day:0,hour:1,minute:2,second:3},u={day:86400,hour:3600,minute:60,second:1};function d({options:e}){const t=function(){const e=document.createElement("div");return e.className="twfyt-sticky-player__progress-bar__slider-time",e}(),r=(null==e?void 0:e.sliderPadding)||0;return{element:t,update:function({evt:e,controller:a,options:n}){t.textContent=function({evt:e,controller:t,options:r}){const{duration:a}=t.video,n=(e.offsetX+0)/e.target.offsetWidth,o=Math.min(a,a*n);return function(e,t={}){const r={format:"default",leadingZero:!1,limitUnits:!1,...t};"hms"===r.format&&(r.limitUnits="hour");const a=[];return Object.values(u).forEach(((t,n)=>{if(!(r.limitUnits&&n<l[r.limitUnits]))if(e>=t){const r=parseInt(e/t,10);e-=r*t,a.push(r)}else a.length&&a.push(0)})),!a.length&&a.push(0),a.length<2&&!r.limitUnits&&a.unshift(0),"hms"===r.format?a.map(((e,t,{length:r})=>`${e}${["h","m","s"].slice(-1*r)[t]}`)).join(""):a.map(((e,t)=>e.toString().length>1||0===t&&!r.leadingZero?e:`0${e}`)).join(":")}(r.ytpTimeBasedOnPlaybackRate?o/(t.video.playbackRate||1):o)}({evt:e,controller:a,options:n});const o=t.offsetWidth,i=e.target.offsetWidth,s=(()=>{const t=e.offsetX+r-o/2;return e.offsetX+r<i/2?Math.max(t,r):e.offsetX>i-o/2?i+r-o:t})();t.style.left=`${s}px`}}}var y,f=r(3379),m=r.n(f),b=r(4729),g=0,v={injectType:"lazyStyleTag",insert:"head",singleton:!1},h={};h.locals=b.Z.locals||{},h.use=function(){return g++||(y=m()(b.Z,v)),h},h.unuse=function(){g>0&&!--g&&(y(),y=null)};const _=h;function k({video:e,options:t}){_.use();const r=function(e,t={}){if(!e)return;const r={bufferHeadroom:1,playbackRateMin:.25,playbackRateMax:16,playbackRateStep:.1,restorePausedOnSeek:!1,seekStep:5,seekWithinCurrentBuffer:!1,volumeStep:.05,unmuteOnAdjustVolume:!1,...t},a={playbackRate:null,restorePausedActivated:!1},n=(t=r.playbackRateStep)=>{const a=Math.round(100*e.playbackRate+100*t)/100;if(e.playbackRate<1&&a>1)return e.playbackRate=1;e.playbackRate=Math.min(a,r.playbackRateMax)},p=(t=r.playbackRateStep)=>{const a=Math.round(100*e.playbackRate-100*t)/100;if(e.playbackRate>1&&a<1)return e.playbackRate=1;e.playbackRate=Math.max(r.playbackRateMin,a)},l=(t=r.seekStep,n={})=>{const o={...r,...n},{currentTime:p,duration:l,paused:u}=e,d=p-Math.abs(s(t,l));if(o.seekWithinCurrentBuffer){const t=i(e).current.start;return e.currentTime=d-o.bufferHeadroom>t?d:Math.min(t+o.bufferHeadroom,p),void(r.restorePausedOnSeek&&c.pause({paused:u,state:a,video:e}))}e.currentTime=Math.max(d,0),r.restorePausedOnSeek&&c.pause({paused:u,state:a,video:e})},u=(t=r.seekStep,n={})=>{const o={...r,...n},{currentTime:p,duration:l,paused:u}=e,d=p+Math.abs(s(t,l));if(o.seekWithinCurrentBuffer){const t=i(e).current.end;return e.currentTime=d+o.bufferHeadroom<t?d:Math.max(t-o.bufferHeadroom,p),void(r.restorePausedOnSeek&&c.pause({paused:u,state:a,video:e}))}e.currentTime=Math.min(d,l),r.restorePausedOnSeek&&c.pause({paused:u,state:a,video:e})},d=(t=r.volumeStep)=>{let{volume:a}=e;a=Math.round(100*a-100*t)/100,e.volume=Math.max(0,a),r.unmuteOnAdjustVolume&&(e.muted=!1)},y=(t=r.volumeStep)=>{let{volume:a}=e;a=Math.round(100*a+100*t)/100,e.volume=Math.min(a,1),r.unmuteOnAdjustVolume&&(e.muted=!1)};return{captureVideoFrame:o.bind(null,e),getBuffered:i.bind(null,e),adjustPlaybackRateBy:e=>{e&&(e>0?n(Math.abs(e)):p(Math.abs(e)))},decreasePlaybackRate:p,increasePlaybackRate:n,setPlaybackRate:t=>{t>=r.playbackRateMin&&t<=r.playbackRateMax&&(e.playbackRate=t)},seekBackward:l,seekForward:u,seekBy:(e,t={})=>{e&&(parseFloat(e)>0?u(e,t):l(e,t))},seekTo:t=>{const r=s(t,e.duration);e.currentTime=r},play:(t=1)=>{if(t)return e.play();e.pause()},togglePlay:()=>{if(r.restorePausedOnSeek&&a.restorePausedActivated)return c.play({state:a,video:e});e.paused?e.play():e.pause()},adjustVolumeBy:e=>{e&&(e>0?y(Math.abs(e)):d(Math.abs(e)))},decreaseVolume:d,increaseVolume:y,setVolume:t=>{t>=0&&t<=1&&(e.volume=t)},setMuted:t=>e.muted=t,toggleMute:()=>e.muted=!e.muted,video:e}}(e),a=document.createElement("div");a.id="twfyt-sticky-player-progress-bar",a.className="twfyt-sticky-player__progress-bar__container";const l=document.createElement("div");l.className="twfyt-sticky-player__progress-bar";const u=function({controller:e,progressBar:t,options:r}){const a=function(){const e=document.createElement("input");return e.className="twfyt-sticky-player__progress-bar__slider",e.setAttribute("tabindex","-1"),e.type="range",e.min=0,e.max=1,e.step=.001,e.value=0,e}();a.addEventListener("click",(function(e){e.stopPropagation(),a.blur(),n.focus()})),a.addEventListener("input",(function(a){const{value:n}=a.target;e.video.currentTime=function(){if(r.vpIsLiveStream){var t;const{start:r,end:a}=(null===(t=e.getBuffered())||void 0===t?void 0:t.current)||{};return(a-r)*n+r}return e.video.duration*n}(),p(n,t)}));const n=document.activeElement;return a}({controller:r,progressBar:l,options:t}),y=d({controller:r,options:t});function f(e){var a,o;const i=e.target,s=(null===(a=r.getBuffered())||void 0===a||null===(o=a.current)||void 0===o?void 0:o.end)||0,c=function(){if(t.vpIsLiveStream){var e;const{start:t,end:a}=(null===(e=r.getBuffered())||void 0===e?void 0:e.current)||{};return(i.currentTime-t)/(a-t)}return i.currentTime/i.duration}();u.value=c,p(c,l),function(e,t){n.set({"progress-bar-buffer":100*e+"%"},{element:t})}(s/i.duration,l)}return l.append(u),l.append(y.element),a.appendChild(l),p(0,l),u.addEventListener("mousemove",(function(e){y.update({evt:e,controller:r,options:t}),y.element.style.opacity=1,n.set({"progress-bar-hover":e.offsetX/u.offsetWidth*100+"%"},{element:u})})),u.addEventListener("mouseout",(function(){y.element.style.opacity=0,n.set({"progress-bar-hover":"0%"},{element:u})})),e.addEventListener("timeupdate",f),e.addEventListener("seeking",f),{element:a,update:f}}var w=r(8500);!async function(t){var r;if(e()&&(t||(t=document.querySelector("ytmusic-player video[data-twfyt-active-video]"))),t||(t=document.querySelector("#shorts-player video[data-twfyt-active-video]")||document.querySelector("#movie_player video[data-twfyt-active-video]")),!t)return;const a=e()?t.closest("ytmusic-player-page"):t.closest("#shorts-player, #movie_player"),n=await(null===(r=window.documentPictureInPicture)||void 0===r?void 0:r.requestWindow({copyStyleSheets:!0,...e()?{width:960,height:480}:{width:t.offsetWidth/t.offsetHeight*332,height:362}}));if(!n)return;[...document.styleSheets].forEach((e=>{try{const t=[...e.cssRules].map((e=>e.cssText)).join(""),r=document.createElement("style");r.textContent=t,n.document.head.appendChild(r)}catch(t){const r=document.createElement("link");r.rel="stylesheet",r.type=e.type,r.media=e.media,r.href=e.href,n.document.head.appendChild(r)}}));const o=t.className,i=t.id,s=a.parentElement,c=document.createElement("style");c.textContent=w.Z;const p=k({video:t,options:{sliderPadding:12}});t.id="_",t.className="_",t.parentElement.append(p.element),document.body.dataset.twfytDpip="",n.document.head.append(c),n.document.body.append(a),n.window.document.title="YouTube PiP",p.update({target:t}),n.addEventListener("unload",(()=>{t.className=o,t.id=i,p.element.remove(),s.append(a),((e,t)=>{window.postMessage({type:"ytpActionRequest",action:e,payload:t,playerId:void 0,options:void 0},window.location.origin)})("updateVideoData"),delete document.body.dataset.twfytDpip}))}()})()})();